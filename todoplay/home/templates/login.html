<!DOCTYPE html>
{% load static %}

<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Todoplay</title>
        <link href="{% static '/css/home/login.css' %}" rel="stylesheet" type="text/css" />
             <script  src="http://code.jquery.com/jquery-latest.min.js"></script>

    </head>
    <body>
        <div class="mainbox">
            <div class="left">
                <div class="logo"><img src="{% static '/img/logo.png' %}" /></div>
                <div class="explain">
                    투두플레이로 여러분의 오늘을<br />직관적이고 효율적으로<br />관리하세요!
                </div>
                <div class="login_img"><img src="{% static '/img/login_img.png' %}" /></div>
            </div>
            <div class="right">
                <h2 class="login_txt">LOGIN</h2>
                <input
                        id="username"
                    class="email_id"
                    type="text"
                    name="username"
                    placeholder="이메일 아이디"
                    style="width: 544px; height: 40px"
                />
                <br />
                <input
                        id="password"
                    class="password"
                    type="password"
                    name="password"
                    placeholder="비밀번호"
                    style="width: 544px; height: 40px"
                />
                <br />
                <div class="min_left">
                    <label for="remember-check">
                        <input type="checkbox" id="remember-check" />아이디
                        저장하기
                    </label>
                </div>
                <div class="min_right">
                    <div class="find"><a href="/home/findID">아이디/비밀번호 찾기</a></div>
                </div>
                <input
                        id="login_button"
                    class="Login"
                    type="submit"
                    value="로그인"
                    style="width: 544px; height: 45px"
                />
                <div class="goto_join"><a href="/home/signup">투두플레이 회원가입</a></div>
            </div>
        </div>


<script>

    function getCookie(name) {
        const cookieValue = document.cookie.match('(^|;)\\s*' + name + '\\s*=\\s*([^;]+)');
        return cookieValue ? cookieValue.pop() : '';
    }

    $("#login_button").click(function() {
        var username = $('#username').val();
        var password = $('#password').val();

        $.ajax({
            type: 'POST',
            url: 'http://127.0.0.1:8000/home/login',
            headers: {
                "X-CSRFToken": getCookie("csrftoken")
            },
            contentType: 'application/json',
            data: JSON.stringify({
                'username': username,
                'password': password,
            }),
            success: function(data){
                alert("로그인 성공");
                location.href="/";
            },
            error: function(request, status, error){
                alert(error);
            }
        })
    })

</script>

    </body>
</html>
